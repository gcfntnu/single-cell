#-*- mode:snakemake -*-
extra_conf_fn = srcdir('db.config')
if os.path.exists(extra_conf_fn):
    with open(extra_conf_fn) as fh:
        c  = yaml.load(fh) or {}
        update_config2(config, c)

if config['db']['reference_db'] == 'ensembl':
    include:
        'gcfdb/ensembl.db'
if config['db']['reference_db'] == 'gencode':
    include:
        'gcfdb/gencode.db'
if config['db']['reference_db'] == '10xgenomics':
    include:
        'gcfdb/10xgenomics.db'

if 'REF_DIR' in locals():
    pass
elif 'ref_dir' in config:
    REF_DIR = config['ref_dir']
elif 'reference_db' in config['db']:
    REF_DIR = join(EXT_DIR, config['db']['reference_db'])
else:
    REF_DIR = None

include:
    'gcfdb/convert.rules'

#include:
#    'db/cellranger.db'
include:
    'gcfdb/alevin.db'
