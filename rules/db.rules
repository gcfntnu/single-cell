#-*- mode:snakemake -*-
extra_conf_fn = srcdir('db.config')
if os.path.exists(extra_conf_fn):
    with open(extra_conf_fn) as fh:
        c  = yaml.load(fh) or {}
        update_config2(config, c)

if config['db']['reference_db'] == 'ensembl':
    include:
        'gcfdb/ensembl.db'
if config['db']['reference_db'] == 'gencode':
    include:
        'gcfdb/gencode.db'

include:
    'gcfdb/10xgenomics.db'

if 'REF_DIR' in locals():
    pass
elif 'ref_dir' in config:
    REF_DIR = config['ref_dir']
elif 'reference_db' in config['db']:
    _ref = config['db']['reference_db']
    DB_CONF = config['db'][_ref]
    REF_DIR = join(EXT_DIR, _ref, config['organism'], DB_CONF['version'])
else:
    REF_DIR = None

include:
    'gcfdb/convert.rules'


